{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import Table from\"@mui/material/Table\";import TableBody from\"@mui/material/TableBody\";import TableCell from\"@mui/material/TableCell\";import TableContainer from\"@mui/material/TableContainer\";import TableHead from\"@mui/material/TableHead\";import TableRow from\"@mui/material/TableRow\";import Paper from\"@mui/material/Paper\";import Box from\"@mui/material/Box\";import axios from\"axios\";import Pagination from\"@mui/material/Pagination\";import DeleteOutlineIcon from\"@mui/icons-material/DeleteOutline\";import{TextField,Button}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const baseURL=process.env.REACT_APP_BACKEND_URL;const UserDetails=()=>{const[allUsers,setAllUsers]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const itemsPerPage=10;const handlePageChange=(event,value)=>{setCurrentPage(value);};const nextPage=()=>{setCurrentPage(currentPage+1);};const prevPage=()=>{if(currentPage>1){setCurrentPage(currentPage-1);}};useEffect(()=>{fetchUsers(currentPage,itemsPerPage);},[currentPage]);const fetchUsers=async(pageNumber,itemsPerPage)=>{try{const response=await axios.get(\"\".concat(baseURL,\"/admin/details?page=\").concat(pageNumber,\"&limit=\").concat(itemsPerPage));const{results,total_page}=response.data.data;console.log(results,\"r\");setAllUsers(results);setTotalPages(total_page);}catch(error){console.error(\"Error fetching Receipt:\",error);}};// console.log(\"data\", allUsers);\n// delete\nconst handleDelete=async id=>{try{const response=await axios.get(\"\".concat(baseURL,\"/admin/delete/\").concat(id));console.log(response);if(response.data.httpStatus===200){console.log(\"User delete successfully\");fetchUsers(currentPage,itemsPerPage);}else{console.error(\"Error deleting User\");}}catch(error){console.error(\"Error deleting User:\",error);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",paddingLeft:\"10px\"},children:/*#__PURE__*/_jsx(\"h1\",{children:\"User Details\"})}),/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",sx:{paddingTop:\"20px\"},children:/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{sx:{\"@media (min-width: 600px)\":{minWidth:\"600px\"},\"@media (min-width: 800px)\":{minWidth:\"800px\"},\"@media (min-width: 1200px)\":{minWidth:\"1200px\"}},\"aria-label\":\"simple table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"SLNo\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"User\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"status\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Create Time\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Update Time\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:allUsers&&allUsers.map((user,index)=>{let createTime=new Date(user.createdAt);let formattedCreateTime=\"\".concat(createTime.toLocaleDateString(),\" \").concat(createTime.toLocaleTimeString());let updateTime=new Date(user.updatedAt);let formattedUpdateTime=\"\".concat(updateTime.toLocaleDateString(),\" \").concat(updateTime.toLocaleTimeString());return/*#__PURE__*/_jsxs(TableRow,{sx:{\"&:last-child td, &:last-child th\":{border:0}},children:[/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",children:index+1}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:user.username}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:user.status?\"Yes\":\"No\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:formattedCreateTime}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:formattedUpdateTime}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(Button,{sx:{color:\"red\"},onClick:()=>handleDelete(user._id),children:/*#__PURE__*/_jsx(DeleteOutlineIcon,{})})})]});})})]})})}),/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"20vh\",children:/*#__PURE__*/_jsx(Pagination,{count:totalPages,page:currentPage,onChange:handlePageChange,variant:\"outlined\",shape:\"rounded\"})})]});};export default UserDetails;","map":{"version":3,"names":["React","useState","useEffect","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Box","axios","Pagination","DeleteOutlineIcon","TextField","Button","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","baseURL","process","env","REACT_APP_BACKEND_URL","UserDetails","allUsers","setAllUsers","currentPage","setCurrentPage","totalPages","setTotalPages","itemsPerPage","handlePageChange","event","value","nextPage","prevPage","fetchUsers","pageNumber","response","get","concat","results","total_page","data","console","log","error","handleDelete","id","httpStatus","children","sx","display","flexDirection","alignItems","justifyContent","paddingLeft","paddingTop","component","minWidth","align","map","user","index","createTime","Date","createdAt","formattedCreateTime","toLocaleDateString","toLocaleTimeString","updateTime","updatedAt","formattedUpdateTime","border","scope","username","status","color","onClick","_id","height","count","page","onChange","variant","shape"],"sources":["/media/arafath/New Volume/Final Year Project/inventory-frontend/src/component/admin/UserDetails.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableContainer from \"@mui/material/TableContainer\";\nimport TableHead from \"@mui/material/TableHead\";\nimport TableRow from \"@mui/material/TableRow\";\nimport Paper from \"@mui/material/Paper\";\nimport Box from \"@mui/material/Box\";\nimport axios from \"axios\";\nimport Pagination from \"@mui/material/Pagination\";\nimport DeleteOutlineIcon from \"@mui/icons-material/DeleteOutline\";\nimport { TextField, Button } from \"@mui/material\";\n\nconst baseURL = process.env.REACT_APP_BACKEND_URL;\n\nconst UserDetails = () => {\n  const [allUsers, setAllUsers] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const itemsPerPage = 10;\n  const handlePageChange = (event, value) => {\n    setCurrentPage(value);\n  };\n\n  const nextPage = () => {\n    setCurrentPage(currentPage + 1);\n  };\n\n  const prevPage = () => {\n    if (currentPage > 1) {\n      setCurrentPage(currentPage - 1);\n    }\n  };\n\n  useEffect(() => {\n    fetchUsers(currentPage, itemsPerPage);\n  }, [currentPage]);\n\n  const fetchUsers = async (pageNumber, itemsPerPage) => {\n    try {\n      const response = await axios.get(\n        `${baseURL}/admin/details?page=${pageNumber}&limit=${itemsPerPage}`\n      );\n\n      const { results, total_page } = response.data.data;\n      console.log(results, \"r\");\n      setAllUsers(results);\n      setTotalPages(total_page);\n    } catch (error) {\n      console.error(\"Error fetching Receipt:\", error);\n    }\n  };\n\n  // console.log(\"data\", allUsers);\n\n // delete\nconst handleDelete = async (id) => {\n  try {\n    const response = await axios.get(`${baseURL}/admin/delete/${id}`);\n    console.log(response);\n    if (response.data.httpStatus === 200) {\n      console.log(\"User delete successfully\");\n      fetchUsers(currentPage, itemsPerPage);\n    } else {\n      console.error(\"Error deleting User\");\n    }\n  } catch (error) {\n    console.error(\"Error deleting User:\", error);\n  }\n};\n\n  return (\n    <>\n      <Box\n        sx={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n\n          paddingLeft: \"10px\",\n        }}\n      >\n        <h1>User Details</h1>\n      </Box>\n\n      {/* Table start */}\n      <Box\n        display=\"flex\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        sx={{ paddingTop: \"20px\" }}\n      >\n        <TableContainer component={Paper}>\n          <Table\n            sx={{\n              \"@media (min-width: 600px)\": {\n                minWidth: \"600px\",\n              },\n              \"@media (min-width: 800px)\": {\n                minWidth: \"800px\",\n              },\n              \"@media (min-width: 1200px)\": {\n                minWidth: \"1200px\",\n              },\n            }}\n            aria-label=\"simple table\"\n          >\n            <TableHead>\n              <TableRow>\n                <TableCell>SLNo</TableCell>\n                <TableCell align=\"right\">User</TableCell>\n                <TableCell align=\"right\">status</TableCell>\n                <TableCell align=\"right\">Create Time</TableCell>\n                <TableCell align=\"right\">Update Time</TableCell>\n                <TableCell align=\"right\">Action</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {allUsers &&\n                allUsers.map((user, index) => {\n                  let createTime = new Date(user.createdAt);\n                  let formattedCreateTime = `${createTime.toLocaleDateString()} ${createTime.toLocaleTimeString()}`;\n                  let updateTime = new Date(user.updatedAt);\n                  let formattedUpdateTime = `${updateTime.toLocaleDateString()} ${updateTime.toLocaleTimeString()}`;\n                  return (\n                    <TableRow\n                      sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\n                    >\n                      <TableCell component=\"th\" scope=\"row\">\n                        {index + 1}\n                      </TableCell>\n                      <TableCell align=\"right\">{user.username}</TableCell>\n                      <TableCell align=\"right\">\n                        {user.status ? \"Yes\" : \"No\"}\n                      </TableCell>\n                      <TableCell align=\"right\">{formattedCreateTime}</TableCell>\n\n                      <TableCell align=\"right\">{formattedUpdateTime}</TableCell>\n                      <TableCell align=\"right\">\n                        <Button\n                          sx={{ color: \"red\" }}\n                          onClick={() => handleDelete(user._id)} \n                        >\n                          <DeleteOutlineIcon />\n                        </Button>\n                      </TableCell>\n                    </TableRow>\n                  );\n                })}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </Box>\n\n      {/* pagination */}\n\n      <Box\n        display=\"flex\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        height=\"20vh\"\n      >\n        <Pagination\n          count={totalPages}\n          page={currentPage}\n          onChange={handlePageChange}\n          variant=\"outlined\"\n          shape=\"rounded\"\n        />\n      </Box>\n    </>\n  );\n};\n\nexport default UserDetails;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}